---
title: uniapp兼容问题
date: 2020-01-27 23:15:02
tags: [uniapp, vue]
thumbnail: /images/posts/uniapp.png
categories: [web前端]
---

[![作者头像](/images/uniapp-logo.png)](https://uniapp.dcloud.io/)

<!--more-->

# _组件兼容写法问题_
```text
1.全局的page：再支付宝小程序上打包后页面的最外层没有page组件，所以再设置页面高度
  为100%时并不是手机屏幕的高度，而是元素的高度，其他程序正常;
  
2.scroll-view组件再设置竖向滚动时，在百度小程序上使用触底加载只会执行一次，使用
  page方法来实现此效果;
  
3.使用遮罩层在百度小程序上一定要加page的背景色，否则页面样式会穿透;

4.公共的组件写在components中，注意：公共组件的周期采用的是vue的周期，pages下面
  的页面周期采用的是小程序的生命周期方式开发;
  
5.阻止事件冒泡可以使用vue的方式等：@click.stop=事件名称;

6.事件绑定：即便使用条件编译组件也不支持小程序的catch和bind，都要使用@去绑定;

7.App.vue：相当于小程序的app.js，是程序的主入口;

8.form：在小程序上button绑定的data-只有再小程序上才可以获取到;

9.Map：controltap 控件点击事件不执行，验证了微信小程序也不执行，微信这个事件
  出现了问题;
```


# _接口兼容问题_
```text
1.获取系统信息的接口再百度小程序上会慢一些，建议设置一个延时获取，同时做好空
  的return;
	
2.页面使用触底加载更多建议再底部增加一个空的view，例如：30upx的view，这样触
  底加载更多会更灵敏一些，否则再百度和支付宝小程序上触底不灵敏;
```


# _主要逻辑_
```text
1.定位：每次程序从后台到前台都会更新当前定位信息;

2.网络请求：接口和api统一封装在net下，文件的名字是该接口功能的概要，再net下只
  需要继承初始化的父类然后去实现对应的接口名和域名即可（由于项目中有很多域名所
  以没办法采用一个，只能去单独配置每个接口所需的域名）;
	
3.Model：数据会储存在model中，父类会实现基本的setModel和getModel方法，在子类
  只需要去实现对应的Model的key以及是否需要存入内存中，会先显示model的数据同时
  去请求net更新model（之所以会把key写在model是为了避免时间久了key的乱用导致项
  目的缓存混乱）;

4.分包：分包的写法和微信小程序是一致的，当前版本只有微信小程序支持分包;

5.公共css引入：公共的通用css可以在App.vue中引入;

6.通知：程序中主要使用了发送通知、注册通知、反注册通知的逻辑，例如：筛选功能，
  点击后只会发送对应的通知然后相关的页面去监听对应的通知去做出相应的变化，而不
  是直接去调用，做到模块之间的彻底分离;
```
